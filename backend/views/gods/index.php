<?phpuse yii\helpers\Html;use kartik\grid\GridView;use yii\helpers\Url;use yii\helpers\ArrayHelper;/* @var $this yii\web\View *//* @var $searchModel backend\models\GodsSearch *//* @var $dataProvider yii\data\ActiveDataProvider */$this->title = Yii::t('backend','GODS');$this->params['breadcrumbs'][] = $this->title;$have=array(0=>Yii::t('backend','HAVE'),1=>Yii::t('backend','NOTHAVE'));if(Yii::$app->user->can('canViewsSite')){$this->params['body-class'] = ' goods-class';    $column_user=[    'attribute'=>'user_id',    'format'=>'raw',    'value'=> function($model){        return $model->getInfo($model);    }];$manufacturer_price=[    'attribute'=>'manufacturer_price',    'header'=>Yii::t('backend','MAN_PRICE')];$column_url=[  'attribute'=> 'url',  'format'  =>  'raw',  'value'   =>  function($model){    if(isset($model->url)&&($model->url!='')) {        return Html::a(Yii::t('backend', 'URL_GOODS'), $model->url,['target'=>'_blank']);    }else{        return false;    }  }];$column_site=[    'attribute'   =>   'site',    'format'      =>    'raw',    'header'      =>    Yii::t('backend','SITE'),    'value'       =>    function($model){        if(isset($model->prise->sites)){            return $model->prise->sites;        }else{            return null;        }    },    'filterType'=>GridView::FILTER_SELECT2,    'filter'=> $site,    'filterWidgetOptions'=>[        'pluginOptions'=>['allowClear'=>true],    ],    'filterInputOptions'=>['placeholder'=>Yii::t('backend','SELECT_SITE')]];$column_prise=[    'attribute'     =>  'id_prise',    'format'        =>  'raw',    'header'        =>  Yii::t('backend','PRICE'),    'value'         =>  function($model){        return $model->getThePrise($model->prise);    },    'filterType'=>GridView::FILTER_SELECT2,    'filter'=> $priseDatas,    'filterWidgetOptions'=>[        'pluginOptions'=>['allowClear'=>true],    ],    'filterInputOptions'=>['placeholder'=>Yii::t('backend','PRICE')]];$column_prise_real=[    'attribute'     =>  'the_prise',    'format'        =>  'raw',    'header'        =>  Yii::t('backend','PRICEREAL'),    'value'         =>  function($model){        if(is_object($model->prise))        return $model->prise->price1;        return false;    }];$column_pluss=[    'attribute'     =>  'pluss',    'format'        =>  'raw',    ];$column_provider=[    'attribute'     =>  'id_provider',    'format'        =>  'raw',    'header'        =>  Yii::t('backend','Provider'),    'value'         =>  function($model){        if(isset($model->prise->sites)){            return $model->getProvider($model->addfeilds,$model->prise->sites);        }else{            return null;        }    },    'filterType' => GridView::FILTER_SELECT2,    'filter'     => $nameProvider,    'filterWidgetOptions'=>[        'pluginOptions'=>['allowClear'=>true],    ],    'filterInputOptions'=>['placeholder'=>Yii::t('backend','Provider')]];}else{    $manufacturer_price=[        'attribute'=>'manufacturer_price',        'value'         =>  function($model){            return false;        }    ];    $column_prise_real=[    'attribute'     =>  'the_prise',    'format'        =>  'raw',    'header'        =>  Yii::t('backend','PRICEREAL'),    'value'         =>  function($model){            return false;        }];$column_pluss=[    'attribute'     =>  'pluss',    'format'        =>  'raw',    'value'         =>  function($model){            return false;        }    ];$column_provider=[    'attribute'     =>  'id_provider',    'format'        =>  'raw',    'value'         =>  function($model){        return false;    }];$column_user=[    'attribute'=>'user_id',    'format'=>'raw',    'value'=> function(){        return false;    }];$column_prise=[    'attribute'     =>  'id_prise',    'format'        =>  'raw',    'value'         =>  function($model){        return false;    }];$column_prise_real=[    'attribute'     =>  'the_prise',    'format'        =>  'raw',    'value'         =>  function($model){        return false;    }];$column_url=[  'attribute'=> 'url',  'format'  =>  'raw',  'value'   =>  function($model){   return false;  }];$column_site=['attribute'   =>   'site','format'      =>    'raw','header'      =>    Yii::t('backend','SITE'),'value'       =>    function($model){    return false;   }];}?><div class="gods-index">    <h1><?= Html::encode($this->title) ?></h1>    <?php // echo $this->render('_search', ['model' => $searchModel]); ?>    <p>        <?= Html::a(Yii::t('backend','CREATE_GODS'), ['create'], ['class' => 'btn btn-success']) ?>    </p>    <?= GridView::widget([        'id' => 'kv-grid',        'dataProvider' => $dataProvider,        'filterModel' => $searchModel,        'columns' => [            ['class' => 'yii\grid\SerialColumn'],            ['class' => 'yii\grid\ActionColumn',                'template' => '{update}&nbsp;&nbsp;{seo}&nbsp;&nbsp;{image}&nbsp;&nbsp;{price}&nbsp;&nbsp;{delete}',                'buttons' =>                    [                        'seo' => function ($url, $model) {                            return Html::a('<span class="fa fa-plus"></span>', Url::to(['/addlfeild/index', 'AddlfeildSearch[id_gods]' => $model->id, 'class'=>'id_gods']));},                        'image' => function ($url, $model) {                            return Html::a('<span class="fa fa-picture-o"></span>', Url::to(['/image/index', 'ImageSearch[id_gods]' => $model->id, 'class'=>'gods','feild'=>'id_gods']));},                    ]            ],            'id',            [                'attribute' => 'id_img',                'header'=>  Yii::t('backend','IMAGES'),                'format'    =>  'raw',                'value'     =>  function($model){                    return Html::a($model->getImage($model->id),Url::to('@home/gods/gods/onegods?slug='.$model->slug_gods,true));                }            ],            [                'class'=>'kartik\grid\EditableColumn',                'attribute' =>  'title',                'format'    =>  'raw',                'width'     =>  '120px',                'editableOptions'=> function ($model, $key, $index) {                    return [                        'header'=>Yii::t('backend','TITLE_GODS'),                        'size'=>'md',                        'inputType'=>\kartik\editable\Editable::INPUT_TEXT,                    ];                }            ],            [                'attribute'   =>   'article',                'format'      =>    'raw',                'width'       =>  '115px',                'value'       =>    function($model){                    if(is_object($model->article))                        return $model->article->value;                    return false;                },            ],            [                'attribute'   =>   'have',                'header'      =>    Yii::t('frontend','InHave'),                'format'      =>    'raw',                'width'     =>  '115px',                'value'       =>    function($model){                    if($model->have==0){                        return Yii::t('backend','HAVE');                    }else{                        return Yii::t('backend','NOTHAVE');                    }                },                'filterType'=>GridView::FILTER_SELECT2,                'filter'=> $have,                'filterWidgetOptions'=>[                    'pluginOptions'=>['allowClear'=>true],                ],                'filterInputOptions'=>['placeholder'=>Yii::t('backend','HAVE')]            ],            [                'attribute' => 'size',                'header'    => Yii::t('backend','SIZE1'),                'format'    =>  'raw',                'value'     =>  function($model){                    return $model->getSizeFromIndex();                },                'filterType'=>GridView::FILTER_SELECT2,                'filter'=> $size1,                'filterWidgetOptions'=>[                    'pluginOptions'=>['allowClear'=>true],                ],                'filterInputOptions'=>['placeholder'=>Yii::t('backend','HAVE')]            ],            [                'attribute'   =>   'category',                'format'      =>    'raw',                'width'       =>  '115px',                'header'      =>    Yii::t('backend','CAT'),                'value'       =>    function($model){                    return $model->theGetCat($model->categorys);},                'filterType'=>GridView::FILTER_SELECT2,                'filter'=> $cat,                'filterWidgetOptions'=>[                    'pluginOptions'=>['allowClear'=>true],                ],                'filterInputOptions'=>['placeholder'=>Yii::t('backend','SELECT_CAT')]            ],            /*[                'attribute'   =>   'parrent',                'format'      =>    'raw',                'header'      =>    Yii::t('backend','CATPARENT'),                'width'       =>  '115px',                'value'       =>    function($model){                    return $model->theGetCatParent($model);},            ],*/            $column_prise,            $column_prise_real,            $column_pluss,            $manufacturer_price,            $column_site,            $column_url,            $column_provider,            $column_user,                    ],        'export'=>[            'fontAwesome'=>true        ],        // parameters from the demo form        'persistResize'=>false,    ]); ?></div>